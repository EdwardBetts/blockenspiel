<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>module Blockenspiel::DSLSetupMethods - Blockenspiel 0.4.4 Documentation</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="module">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/blockenspiel/dsl_setup.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    
    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-i-dsl_attr_accessor">#dsl_attr_accessor</a>
    
    <li><a href="#method-i-dsl_attr_writer">#dsl_attr_writer</a>
    
    <li><a href="#method-i-dsl_method">#dsl_method</a>
    
    <li><a href="#method-i-dsl_methods">#dsl_methods</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../Blockenspiel_rdoc.html">Blockenspiel</a>
  
    <li class="file"><a href="../History_rdoc.html">History</a>
  
    <li class="file"><a href="../ImplementingDSLblocks_rdoc.html">ImplementingDSLblocks</a>
  
    <li class="file"><a href="../README_rdoc.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../Blockenspiel.html">Blockenspiel</a>
  
    <li><a href="../Blockenspiel/Base.html">Blockenspiel::Base</a>
  
    <li><a href="../Blockenspiel/BlockParameterError.html">Blockenspiel::BlockParameterError</a>
  
    <li><a href="../Blockenspiel/BlockenspielError.html">Blockenspiel::BlockenspielError</a>
  
    <li><a href="../Blockenspiel/Builder.html">Blockenspiel::Builder</a>
  
    <li><a href="../Blockenspiel/DSL.html">Blockenspiel::DSL</a>
  
    <li><a href="../Blockenspiel/DSLMissingError.html">Blockenspiel::DSLMissingError</a>
  
    <li><a href="../Blockenspiel/DSLSetupMethods.html">Blockenspiel::DSLSetupMethods</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="module">module Blockenspiel::DSLSetupMethods</h1>

  <div id="description" class="description">
    
<h3 id="label-DSL+setup+methods"><a href="DSL.html">DSL</a> setup methods</h3>

<p>These class methods are available after you have included the <a
href="DSL.html">Blockenspiel::DSL</a> module.</p>

<p>By default, a class that has <a href="DSL.html">DSL</a> capability will
automatically make all public methods available to parameterless blocks,
except for the <code>initialize</code> method, any methods whose names
begin with an underscore, and any methods whose names end with an equals
sign.</p>

<p>If you want to change this behavior, use the directives defined here to
control exactly which methods are available to parameterless blocks.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-dsl_attr_accessor" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">dsl_attr_accessor</span><span
            class="method-args">(*names_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>A DSL-friendly attr_accessor.</p>

<p>This creates the usual “name” and “name=” methods in the current class that
can be used in the usual way. However, its implementation of the “name”
method (the getter) also takes an optional parameter that causes it to
behave as a setter. This is done because the usual setter syntax cannot be
used in a parameterless block, since it is syntactically indistinguishable
from a local variable assignment. The “name” method is exposed as a
dsl_method.</p>

<p>For example:</p>

<pre>dsl_attr_accessor :foo</pre>

<p>enables the following:</p>

<pre class="ruby"><span class="ruby-identifier">my_block</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">param</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">param</span>.<span class="ruby-identifier">foo</span> = <span class="ruby-value">1</span>   <span class="ruby-comment"># Usual setter syntax works</span>
  <span class="ruby-identifier">param</span>.<span class="ruby-identifier">foo</span> <span class="ruby-value">2</span>     <span class="ruby-comment"># Alternate setter syntax also works</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">param</span>.<span class="ruby-identifier">foo</span>  <span class="ruby-comment"># Usual getter syntax still works</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">my_block</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># foo = 1       # Usual setter syntax does NOT work since it</span>
                  <span class="ruby-comment">#   looks like a local variable assignment</span>
  <span class="ruby-identifier">foo</span> <span class="ruby-value">2</span>           <span class="ruby-comment"># Alternate setter syntax does work</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">foo</span>        <span class="ruby-comment"># Usual getter syntax still works</span>
<span class="ruby-keyword">end</span>
</pre>
          

          
          <div class="method-source-code" id="dsl_attr_accessor-source">
            <pre><span class="ruby-comment"># File lib/blockenspiel/dsl_setup.rb, line 263</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">dsl_attr_accessor</span>(*<span class="ruby-identifier">names_</span>)
  <span class="ruby-identifier">names_</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name_</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">name_</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">String</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">name_</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Symbol</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-operator">::</span><span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;#{name_.inspect} is not a symbol&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">name_</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">%r^[_a-zA-Z]\w+$/</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-operator">::</span><span class="ruby-constant">NameError</span>, <span class="ruby-node">&quot;invalid attribute name #{name_.inspect}&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">module_eval</span>(<span class="ruby-node">&quot;def #{name_}(value_=::Blockenspiel::NO_VALUE); ::Blockenspiel::NO_VALUE.equal?(value_) ? @#{name_} : @#{name_} = value_; end\n&quot;</span>)
    <span class="ruby-identifier">alias_method</span>(<span class="ruby-node">&quot;#{name_}=&quot;</span>, <span class="ruby-identifier">name_</span>)
    <span class="ruby-identifier">dsl_method</span>(<span class="ruby-identifier">name_</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- dsl_attr_accessor-source -->
          
        </div>

        

        
      </div><!-- dsl_attr_accessor-method -->

    
      <div id="method-i-dsl_attr_writer" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">dsl_attr_writer</span><span
            class="method-args">(*names_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>A DSL-friendly attr_writer.</p>

<p>This creates the usual “name=” method in the current class that can be used
in the usual way. However, it also creates the method “name”, which also
functions as a setter (but not a getter). This is done because the usual
setter syntax cannot be used in a parameterless block, since it is
syntactically indistinguishable from a local variable assignment. The
“name” method is exposed as a dsl_method.</p>

<p>For example:</p>

<pre>dsl_attr_writer :foo</pre>

<p>is functionally equivalent to:</p>

<pre>attr_writer :foo
alias_method :foo, :foo=
dsl_method :foo</pre>

<p>which enables the following:</p>

<pre class="ruby"><span class="ruby-identifier">my_block</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">param</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">param</span>.<span class="ruby-identifier">foo</span> = <span class="ruby-value">1</span>   <span class="ruby-comment"># Usual setter syntax works</span>
  <span class="ruby-identifier">param</span>.<span class="ruby-identifier">foo</span> <span class="ruby-value">2</span>     <span class="ruby-comment"># Alternate setter syntax also works</span>
<span class="ruby-keyword">end</span>
<span class="ruby-identifier">my_block</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># foo = 1       # Usual setter syntax does NOT work since it</span>
                  <span class="ruby-comment">#   looks like a local variable assignment</span>
  <span class="ruby-identifier">foo</span>(<span class="ruby-value">2</span>)          <span class="ruby-comment"># Alternate setter syntax does work</span>
<span class="ruby-keyword">end</span>
</pre>
          

          
          <div class="method-source-code" id="dsl_attr_writer-source">
            <pre><span class="ruby-comment"># File lib/blockenspiel/dsl_setup.rb, line 309</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">dsl_attr_writer</span>(*<span class="ruby-identifier">names_</span>)
  <span class="ruby-identifier">names_</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name_</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">attr_writer</span>(<span class="ruby-identifier">name_</span>)
    <span class="ruby-identifier">alias_method</span>(<span class="ruby-identifier">name_</span>, <span class="ruby-node">&quot;#{name_}=&quot;</span>)
    <span class="ruby-identifier">dsl_method</span>(<span class="ruby-identifier">name_</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- dsl_attr_writer-source -->
          
        </div>

        

        
      </div><!-- dsl_attr_writer-method -->

    
      <div id="method-i-dsl_method" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">dsl_method</span><span
            class="method-args">(name_, delegate_=nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Make a particular method available to parameterless <a
href="DSL.html">DSL</a> blocks.</p>

<p>To explicitly make a method available to parameterless blocks:</p>

<pre>dsl_method :my_method</pre>

<p>To explicitly exclude a method from parameterless blocks:</p>

<pre>dsl_method :my_method, false</pre>

<p>To explicitly make a method available to parameterless blocks, but point it
to a method of a different name on the target class:</p>

<pre>dsl_method :my_method, :target_class_method</pre>
          

          
          <div class="method-source-code" id="dsl_method-source">
            <pre><span class="ruby-comment"># File lib/blockenspiel/dsl_setup.rb, line 175</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">dsl_method</span>(<span class="ruby-identifier">name_</span>, <span class="ruby-identifier">delegate_</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">name_</span> = <span class="ruby-identifier">name_</span>.<span class="ruby-identifier">to_sym</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">delegate_</span>
    <span class="ruby-identifier">delegate_</span> = <span class="ruby-identifier">delegate_</span>.<span class="ruby-identifier">to_sym</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">delegate_</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">delegate_</span> = <span class="ruby-identifier">name_</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@_blockenspiel_methods</span>[<span class="ruby-identifier">name_</span>] = <span class="ruby-identifier">delegate_</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@_blockenspiel_module</span>.<span class="ruby-identifier">public_method_defined?</span>(<span class="ruby-identifier">name_</span>)
    <span class="ruby-ivar">@_blockenspiel_module</span>.<span class="ruby-identifier">module_eval</span>(<span class="ruby-node">&quot;def #{name_}(*params_, &amp;block_); val_ = ::Blockenspiel._target_dispatch(self, :#{name_}, params_, block_); ::Blockenspiel::NO_VALUE.equal?(val_) ? super(*params_, &amp;block_) : val_; end\n&quot;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- dsl_method-source -->
          
        </div>

        

        
      </div><!-- dsl_method-method -->

    
      <div id="method-i-dsl_methods" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">dsl_methods</span><span
            class="method-args">(*names_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Control the behavior of methods with respect to parameterless blocks, or
make a list of methods available to parameterless blocks in bulk.</p>

<p>To enable automatic exporting of methods to parameterless blocks. After
executing this command, all public methods defined in the class will be
available on parameterless blocks, until <code>dsl_methods false</code> is
called:</p>

<pre>dsl_methods true</pre>

<p>To disable automatic exporting of methods to parameterless blocks. After
executing this command, methods defined in this class will be excluded from
parameterless blocks, until <code>dsl_methods true</code> is called:</p>

<pre>dsl_methods false</pre>

<p>To make a list of methods available to parameterless blocks in bulk:</p>

<pre>dsl_methods :my_method1, :my_method2, ...</pre>

<p>You can also point dsl methods to a method of a different name on the
target class, by using a hash syntax, as follows:</p>

<pre class="ruby"><span class="ruby-identifier">dsl_methods</span> :<span class="ruby-identifier">my_method1</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">target_class_method1</span>,
            :<span class="ruby-identifier">my_method2</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">target_class_method2</span>
</pre>

<p>You can mix non-renamed and renamed method declarations as long as the
renamed (hash) methods are at the end. e.g.:</p>

<pre class="ruby"><span class="ruby-identifier">dsl_methods</span> :<span class="ruby-identifier">my_method1</span>, :<span class="ruby-identifier">my_method2</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">target_class_method2</span>
</pre>
          

          
          <div class="method-source-code" id="dsl_methods-source">
            <pre><span class="ruby-comment"># File lib/blockenspiel/dsl_setup.rb, line 216</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">dsl_methods</span>(*<span class="ruby-identifier">names_</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">names_</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">names_</span> <span class="ruby-operator">==</span> [<span class="ruby-keyword">true</span>]
    <span class="ruby-ivar">@_blockenspiel_active</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">names_</span> <span class="ruby-operator">==</span> [<span class="ruby-keyword">false</span>]
    <span class="ruby-ivar">@_blockenspiel_active</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">names_</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Hash</span>)
      <span class="ruby-identifier">names_</span>.<span class="ruby-identifier">pop</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name_</span>, <span class="ruby-identifier">delegate_</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">dsl_method</span>(<span class="ruby-identifier">name_</span>, <span class="ruby-identifier">delegate_</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">names_</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name_</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">dsl_method</span>(<span class="ruby-identifier">name_</span>, <span class="ruby-identifier">name_</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- dsl_methods-source -->
          
        </div>

        

        
      </div><!-- dsl_methods-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

